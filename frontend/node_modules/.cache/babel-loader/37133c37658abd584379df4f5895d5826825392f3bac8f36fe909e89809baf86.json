{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{Link,useLocation,useParams}from\"react-router-dom\";import{sendMessage,onMessageAdded,sendAnswer,checkAnswers,onResultUpdated}from\"../services/firebase-realtime-database.ts\";import{useAuth}from\"../services/useAuth.tsx\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BattleView=()=>{//#region init\nconst[isViewLoaded,setIsLoaded]=useState(false);const{roomId}=useParams();const{user}=useAuth();const myId=(user===null||user===void 0?void 0:user.uid)||\"error\";// Location and Params\nconst location=useLocation();const state=location.state.roomData;const playersKey=Object.keys(state.players);const isHost=myId===state.players[0].id;// const isHost = myId === state.players[playersKey[0]].id;\nconst myData=isHost?state.players[playersKey[0]]:state.players[playersKey[1]];const opponentData=isHost?state.players[playersKey[1]]:state.players[playersKey[0]];// Player Information\nconst myName=`${myData.name} (あなた)`||\"error\";// Battle Configuration\nconst battleConfig=state.battleConfig;const[remainingTime,setRemainingTime]=useState(battleConfig.oneTurnTime);//#endregion\n// Player names mapping\nconst playerNames={[myId]:myName,[opponentData.id]:opponentData.name};const[chatLog,setChatLog]=useState([]);const[message,setMessage]=useState(\"\");const[isMyTurn,setIsMyTurn]=useState(isHost);// Initial turn state (placeholder)\nconst[remainTurn,setRemainTurn]=useState(state.battleConfig.maxTurn);const[answer,setAnswer]=useState({identity:true,select:null,message:\"\"});const[isSubmitted,setIsSubmitted]=useState(false);// ViewDidLoad\nuseEffect(()=>{setIsLoaded(true);},[battleConfig]);useEffect(()=>{if(roomId&&isViewLoaded){// ターン更新をFirebaseから受け取る\nonMessageAdded(roomId,newMessage=>{console.log(\"onMessageAdded:\",newMessage);setChatLog(prevChatLog=>[...prevChatLog,{senderId:newMessage.senderId,message:newMessage.message}]);});}},[roomId,isViewLoaded]);//メッセージ受信時\nuseEffect(()=>{if(isViewLoaded){setIsMyTurn(prevTurn=>!prevTurn);setRemainTurn(prevCount=>prevCount-1);if(remainTurn===0){alert(\"Battle Ended!\");}}},[chatLog]);// バトル終了時\nuseEffect(()=>{if(remainTurn===0){}},[remainTurn]);//#region ui\nconst handleSendMessage=async()=>{if(message.trim()&&isMyTurn&&roomId){setMessage(\"送信中...\");await sendMessage(roomId,message);setMessage(\"\");}};// 回答を送信\nconst handleSubmit=async()=>{if(!answer.select||!answer.identity||!roomId||!myId)return;sendAnswer(roomId,answer);setIsSubmitted(true);//両回答\nif(isHost){checkAnswers(roomId);}console.log(\"入力が送信されました\");};//リザルトを監視\nuseEffect(()=>{if(isSubmitted&&roomId){onResultUpdated(roomId,result=>{console.log(\"Result updated:\",result);if(result){console.log(\"Battle finished!\");// バトル終了時の処理\nalert(\"バトルが終了しました。\");}});isSubmitted;}},[isSubmitted]);const handleFinishMatching=()=>{console.log(\"Finishing battle...\");// バトル終了のロジック\n};//html\nreturn/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u5BFE\\u6226\\u753B\\u9762\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u30EB\\u30FC\\u30E0ID: \",roomId]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u30C1\\u30E3\\u30C3\\u30C8\\u30ED\\u30B0\"}),/*#__PURE__*/_jsx(\"ul\",{children:chatLog.map((msg,index)=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsxs(\"strong\",{children:[playerNames[msg.senderId]||\"Unknown\",\":\"]}),\" \",msg.message]},index))})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u6B8B\\u308A\\u30E1\\u30C3\\u30BB\\u30FC\\u30B8\\u6570: \",remainTurn]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u3053\\u306E\\u30BF\\u30FC\\u30F3\\u306E\\u6B8B\\u308A\\u6642\\u9593: \",remainingTime,\"\\u79D2\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u30BF\\u30FC\\u30F3\\u30D7\\u30EC\\u30FC\\u30E4\\u30FC: \",isMyTurn?\"あなた\":\"相手\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u76F8\\u624B: \",opponentData.name]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u30E1\\u30C3\\u30BB\\u30FC\\u30B8:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter message\",value:message,onChange:e=>setMessage(e.target.value)})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSendMessage,disabled:!isMyTurn,children:isMyTurn||message===\"送信中...\"?\"送信\":\"Wait for your turn\"})]}),remainTurn===0&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u9078\\u629E\\u80A2\\u3068\\u30E1\\u30C3\\u30BB\\u30FC\\u30B8\\u3092\\u5165\\u529B\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\"}),/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u9078\\u629E\\u80A2:\",/*#__PURE__*/_jsxs(\"select\",{onChange:e=>setAnswer(prevAnswer=>({...prevAnswer,select:e.target.value===\"true\"})),value:answer.select!==null?String(answer.select):\"\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u9078\\u629E\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\"}),/*#__PURE__*/_jsx(\"option\",{value:\"true\",children:\"\\u9078\\u629E\\u80A2A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"false\",children:\"\\u9078\\u629E\\u80A2B\"})]})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u30E1\\u30C3\\u30BB\\u30FC\\u30B8:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:answer.message,onChange:e=>setAnswer(prevAnswer=>({...prevAnswer,message:e.target.value})),placeholder:\"\\u30E1\\u30C3\\u30BB\\u30FC\\u30B8\\u3092\\u5165\\u529B\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,children:\"\\u9001\\u4FE1\"})]}),/*#__PURE__*/_jsx(Link,{to:\"/result\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleFinishMatching,children:\"\\u30D0\\u30C8\\u30EB\\u7D42\\u4E86\"})})]});//#endregion\n};export default BattleView;","map":{"version":3,"names":["React","useState","useEffect","Link","useLocation","useParams","sendMessage","onMessageAdded","sendAnswer","checkAnswers","onResultUpdated","useAuth","jsx","_jsx","jsxs","_jsxs","BattleView","isViewLoaded","setIsLoaded","roomId","user","myId","uid","location","state","roomData","playersKey","Object","keys","players","isHost","id","myData","opponentData","myName","name","battleConfig","remainingTime","setRemainingTime","oneTurnTime","playerNames","chatLog","setChatLog","message","setMessage","isMyTurn","setIsMyTurn","remainTurn","setRemainTurn","maxTurn","answer","setAnswer","identity","select","isSubmitted","setIsSubmitted","newMessage","console","log","prevChatLog","senderId","prevTurn","prevCount","alert","handleSendMessage","trim","handleSubmit","result","handleFinishMatching","children","map","msg","index","type","placeholder","value","onChange","e","target","onClick","disabled","prevAnswer","String","to"],"sources":["/Users/ryotarooda/Desktop/卒論/TuringChats/turing-chat-d/turing-chat-d11/frontend/src/views/BattleView.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link, useLocation, useParams } from \"react-router-dom\";\nimport {\n  sendMessage,\n  onMessageAdded,\n  sendAnswer,\n  checkAnswers,\n  onResultUpdated,\n} from \"../services/firebase-realtime-database.ts\";\nimport {\n  BattleLog,\n  PlayerData,\n  RoomData,\n  SubmitAnswer,\n} from \"shared/dist/types\";\nimport { useAuth } from \"../services/useAuth.tsx\";\n\nconst BattleView: React.FC = () => {\n  //#region init\n  const [isViewLoaded, setIsLoaded] = useState<boolean>(false);\n  const { roomId } = useParams<{ roomId: string }>();\n\n  const { user } = useAuth();\n  const myId = user?.uid || \"error\";\n\n  // Location and Params\n  const location = useLocation();\n  const state: RoomData = location.state.roomData;\n  const playersKey = Object.keys(state.players);\n  const isHost = myId === state.players[0].id;\n  // const isHost = myId === state.players[playersKey[0]].id;\n\n  const myData: PlayerData = isHost\n    ? state.players[playersKey[0]]\n    : state.players[playersKey[1]];\n  const opponentData: PlayerData = isHost\n    ? state.players[playersKey[1]]\n    : state.players[playersKey[0]];\n\n  // Player Information\n  const myName = `${myData.name} (あなた)` || \"error\";\n\n  // Battle Configuration\n  const battleConfig = state.battleConfig;\n  const [remainingTime, setRemainingTime] = useState<number>(\n    battleConfig.oneTurnTime\n  );\n  //#endregion\n\n  // Player names mapping\n  const playerNames: Record<string, string> = {\n    [myId]: myName,\n    [opponentData.id]: opponentData.name,\n  };\n  const [chatLog, setChatLog] = useState<\n    { senderId: string; message: string }[]\n  >([]);\n  const [message, setMessage] = useState<string>(\"\");\n  const [isMyTurn, setIsMyTurn] = useState<boolean>(isHost); // Initial turn state (placeholder)\n  const [remainTurn, setRemainTurn] = useState<number>(\n    state.battleConfig.maxTurn\n  );\n  const [answer, setAnswer] = useState<SubmitAnswer>({\n    identity: true,\n    select: null,\n    message: \"\",\n  });\n  const [isSubmitted, setIsSubmitted] = useState<boolean>(false);\n\n  // ViewDidLoad\n  useEffect(() => {\n    setIsLoaded(true);\n  }, [battleConfig]);\n\n  useEffect(() => {\n    if (roomId && isViewLoaded) {\n      // ターン更新をFirebaseから受け取る\n      onMessageAdded(roomId, (newMessage) => {\n        console.log(\"onMessageAdded:\", newMessage);\n        setChatLog((prevChatLog) => [\n          ...prevChatLog,\n          { senderId: newMessage.senderId, message: newMessage.message },\n        ]);\n      });\n    }\n  }, [roomId, isViewLoaded]);\n\n  //メッセージ受信時\n  useEffect(() => {\n    if (isViewLoaded) {\n      setIsMyTurn((prevTurn) => !prevTurn);\n      setRemainTurn((prevCount) => prevCount - 1);\n      if (remainTurn === 0) {\n        alert(\"Battle Ended!\");\n      }\n    }\n  }, [chatLog]);\n\n  // バトル終了時\n  useEffect(() => {\n    if (remainTurn === 0) {\n    }\n  }, [remainTurn]);\n\n  //#region ui\n  const handleSendMessage = async () => {\n    if (message.trim() && isMyTurn && roomId) {\n      setMessage(\"送信中...\");\n      await sendMessage(roomId, message);\n      setMessage(\"\");\n    }\n  };\n\n  // 回答を送信\n  const handleSubmit = async () => {\n    if (!answer.select || !answer.identity || !roomId || !myId) return;\n\n    sendAnswer(roomId, answer);\n\n    setIsSubmitted(true);\n\n    //両回答\n    if (isHost) {\n      checkAnswers(roomId);\n    }\n\n    console.log(\"入力が送信されました\");\n  };\n\n  //リザルトを監視\n  useEffect(() => {\n    if (isSubmitted && roomId) {\n      onResultUpdated(roomId, (result) => {\n        console.log(\"Result updated:\", result);\n        if (result) {\n          console.log(\"Battle finished!\");\n\n          // バトル終了時の処理\n          alert(\"バトルが終了しました。\");\n        }\n      });\n      isSubmitted;\n    }\n  }, [isSubmitted]);\n\n  const handleFinishMatching = () => {\n    console.log(\"Finishing battle...\");\n    // バトル終了のロジック\n  };\n\n  //html\n  return (\n    <div>\n      <h1>対戦画面</h1>\n      <p>ルームID: {roomId}</p>\n      <div>\n        <h2>チャットログ</h2>\n        <ul>\n          {chatLog.map((msg, index) => (\n            <li key={index}>\n              <strong>{playerNames[msg.senderId] || \"Unknown\"}:</strong>{\" \"}\n              {msg.message}\n            </li>\n          ))}\n        </ul>\n      </div>\n      <p>残りメッセージ数: {remainTurn}</p>\n      <p>このターンの残り時間: {remainingTime}秒</p>\n      <p>ターンプレーヤー: {isMyTurn ? \"あなた\" : \"相手\"}</p>\n      <p>相手: {opponentData.name}</p>\n      <div>\n        <label>\n          メッセージ:\n          <input\n            type=\"text\"\n            placeholder=\"Enter message\"\n            value={message}\n            onChange={(e) => setMessage(e.target.value)}\n          />\n        </label>\n        <button onClick={handleSendMessage} disabled={!isMyTurn}>\n          {isMyTurn || message === \"送信中...\" ? \"送信\" : \"Wait for your turn\"}\n        </button>\n      </div>\n      {remainTurn === 0 && (\n        <div>\n          <h2>選択肢とメッセージを入力してください</h2>\n          <label>\n            選択肢:\n            <select\n              onChange={(e) =>\n                setAnswer((prevAnswer) => ({\n                  ...prevAnswer,\n                  select: e.target.value === \"true\",\n                }))\n              }\n              value={answer.select !== null ? String(answer.select) : \"\"}\n            >\n              <option value=\"\">選択してください</option>\n              <option value=\"true\">選択肢A</option>\n              <option value=\"false\">選択肢B</option>\n            </select>\n          </label>\n\n          <label>\n            メッセージ:\n            <input\n              type=\"text\"\n              value={answer.message}\n              onChange={(e) =>\n                setAnswer((prevAnswer) => ({\n                  ...prevAnswer,\n                  message: e.target.value,\n                }))\n              }\n              placeholder=\"メッセージを入力してください\"\n            />\n          </label>\n          <button onClick={handleSubmit}>送信</button>\n        </div>\n      )}\n      <Link to=\"/result\">\n        <button onClick={handleFinishMatching}>バトル終了</button>\n      </Link>\n    </div>\n  );\n\n  //#endregion\n};\n\nexport default BattleView;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}